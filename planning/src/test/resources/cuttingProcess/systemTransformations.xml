<?xml version="1.0" encoding="UTF-8"?>
<systemTransformations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../systemTransformations.xsd">
	<systemTransformation>
		<name>ELEMENT-CUT-CYLINDER-SURFACE</name>
		<systemTemplate>
			<objectTemplate>
				<objectId>ID-WORKPIECE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-WORKPIECE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER</name>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-CYLINDER-SURFACE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-HAS-DIAMETER-REQUIREMENT</name>
					<value type="boolean">false</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-REQUIREMENT</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-REQUIREMENT</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER-REQUIREMENT-STATUS</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER-REQUIREMENT</name>
				</attributeTemplate>
			</objectTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-CYLINDER-SURFACE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-CYLINDER-SURFACE</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-REQUIREMENT</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-REQUIREMENT</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-DIAMETER-REQUIREMENT</name>
				<objectId1>ID-REQUIREMENT</objectId1>
			</linkTemplate>
		</systemTemplate>
		<transformations>
			<attributeTransformation>
				<objectId>ID-REQUIREMENT</objectId>
				<name>ATTRIBUTE-DIAMETER-REQUIREMENT-STATUS</name>
				<value type="boolean">true</value>
			</attributeTransformation>
			<linkTransformation>
				<objectId>ID-REQUIREMENT</objectId>
				<name>LINK-IS-DIAMETER-REQUIREMENT</name>
				<newValue>ID-CYLINDER-SURFACE</newValue>
			</linkTransformation>
			<linkTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>LINK-IS-DIAMETER-REQUIREMENT</name>
				<newValue>ID-REQUIREMENT</newValue>
			</linkTransformation>
			<attributeTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>ATTRIBUTE-HAS-DIAMETER-REQUIREMENT</name>
				<value type="boolean">true</value>
			</attributeTransformation>
		</transformations>
		<action>
			<name>OPERATION-CUT-CYLINDER-SURFACE</name>
			<preConditionChecker>
				<line n="1">local systemVariant = ...</line>
				<line n="2">local cylinderSurface_actual = systemVariant:getObjectByIdMatch('ID-CYLINDER-SURFACE')</line>
				<line n="3">local diameter = cylinderSurface_actual:getAttribute('ATTRIBUTE-DIAMETER'):getValueAsInteger()</line>
				<line n="4">local requirement_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT')</line>
				<line n="5">local diameterRequired = requirement_actual:getAttribute('ATTRIBUTE-DIAMETER-REQUIREMENT'):getValueAsInteger()</line>
				<line n="6">return diameter &gt; diameterRequired</line>
			</preConditionChecker>
			<parameterUpdater>
				<line n="1">local systemVariant = ...</line>
				<line n="2">local cylinderSurface_actual = systemVariant:getObjectByIdMatch('ID-CYLINDER-SURFACE')</line>
				<line n="3">local diameter = cylinderSurface_actual:getAttribute('ATTRIBUTE-DIAMETER'):getValueAsInteger()</line>
				<line n="4">local requirement_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT')</line>
				<line n="5">local diameterRequired = requirement_actual:getAttribute('ATTRIBUTE-DIAMETER-REQUIREMENT'):getValueAsInteger()</line>
				<line n="6">local diameterDelta = diameter - diameterRequired</line>
				<line n="7">systemVariant:setActionParameter('PARAMETER-DIAMETER-DELTA', diameterDelta)</line>
				<line n="8">cylinderSurface_actual:getAttribute('ATTRIBUTE-DIAMETER'):setValue(diameterRequired)</line>
			</parameterUpdater>
		</action>
	</systemTransformation>
	<systemTransformation>
		<name>ELEMENT-TRIM-CYLINDER-SURFACE</name>
		<systemTemplate>
			<objectTemplate>
				<objectId>ID-WORKPIECE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-WORKPIECE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH</name>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-HAS-LENGTH-REQUIREMENT</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-CYLINDER-SURFACE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-HAS-DIAMETER-REQUIREMENT</name>
					<value type="boolean">true</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-REQUIREMENT</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-REQUIREMENT</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH-REQUIREMENT-STATUS</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH-REQUIREMENT</name>
				</attributeTemplate>
			</objectTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-CYLINDER-SURFACE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-CYLINDER-SURFACE</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-REQUIREMENT</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-REQUIREMENT</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<objectId1>ID-CYLINDER-SURFACE</objectId1>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<objectId1>ID-REQUIREMENT</objectId1>
			</linkTemplate>
		</systemTemplate>
		<transformations>
			<attributeTransformation>
				<objectId>ID-REQUIREMENT</objectId>
				<name>ATTRIBUTE-LENGTH-REQUIREMENT-STATUS</name>
				<value type="boolean">true</value>
			</attributeTransformation>
			<linkTransformation>
				<objectId>ID-REQUIREMENT</objectId>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<newValue>ID-CYLINDER-SURFACE</newValue>
			</linkTransformation>
			<linkTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<newValue>ID-REQUIREMENT</newValue>
			</linkTransformation>
			<attributeTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>ATTRIBUTE-HAS-LENGTH-REQUIREMENT</name>
				<value type="boolean">true</value>
			</attributeTransformation>
		</transformations>
		<action>
			<name>OPERATION-TRIM-CYLINDER-SURFACE</name>
			<preConditionChecker>
				<line n="1">local systemVariant = ...</line>
				<line n="2">local cylinderSurface_actual = systemVariant:getObjectByIdMatch('ID-CYLINDER-SURFACE')</line>
				<line n="3">local length = cylinderSurface_actual:getAttribute('ATTRIBUTE-LENGTH'):getValueAsInteger()</line>
				<line n="4">local requirement_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT')</line>
				<line n="5">local lengthRequired = requirement_actual:getAttribute('ATTRIBUTE-LENGTH-REQUIREMENT'):getValueAsInteger()</line>
				<line n="6">return length == lengthRequired</line>
			</preConditionChecker>
		</action>
	</systemTransformation>
	<systemTransformation>
		<name>ELEMENT-SPLIT-CYLINDER-SURFACE</name>
		<systemTemplate>
			<objectTemplate>
				<objectId>ID-WORKPIECE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-WORKPIECE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH</name>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-HAS-LENGTH-REQUIREMENT</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER</name>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-CYLINDER-SURFACE</name>
					<value type="boolean">true</value>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-REQUIREMENT-L</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-REQUIREMENT</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH-REQUIREMENT-STATUS</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-LENGTH-REQUIREMENT</name>
				</attributeTemplate>
			</objectTemplate>
			<objectTemplate>
				<objectId>ID-REQUIREMENT-R</objectId>
				<attributeTemplate>
					<name>ATTRIBUTE-REQUIREMENT</name>
					<value type="boolean">true</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER-REQUIREMENT-STATUS</name>
					<value type="boolean">false</value>
				</attributeTemplate>
				<attributeTemplate>
					<name>ATTRIBUTE-DIAMETER-REQUIREMENT</name>
				</attributeTemplate>
			</objectTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-CYLINDER-SURFACE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-PART-OF</name>
				<objectId1>ID-CYLINDER-SURFACE</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-REQUIREMENT-L</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-REQUIREMENT-L</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-WORKPIECE</objectId1>
				<objectId2>ID-REQUIREMENT-R</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-REQUIREMENT-OF</name>
				<objectId1>ID-REQUIREMENT-R</objectId1>
				<objectId2>ID-WORKPIECE</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<objectId1>ID-CYLINDER-SURFACE</objectId1>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-SURFACE-SIDE-RIGHT</name>
				<objectId1>ID-REQUIREMENT-L</objectId1>
				<objectId2>ID-REQUIREMENT-R</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-SURFACE-SIDE-LEFT</name>
				<objectId1>ID-REQUIREMENT-R</objectId1>
				<objectId2>ID-REQUIREMENT-L</objectId2>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<objectId1>ID-REQUIREMENT-L</objectId1>
			</linkTemplate>
			<linkTemplate>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<objectId1>ID-REQUIREMENT-R</objectId1>
			</linkTemplate>
		</systemTemplate>
		<transformations>
			<attributeTransformation>
				<objectId>ID-REQUIREMENT-L</objectId>
				<name>ATTRIBUTE-LENGTH-REQUIREMENT-STATUS</name>
				<value type="boolean">true</value>
			</attributeTransformation>
			<attributeTransformation>
				<objectId>ID-REQUIREMENT-R</objectId>
				<name>ATTRIBUTE-DIAMETER-REQUIREMENT-STATUS</name>
				<value type="boolean">true</value>
			</attributeTransformation>
			<linkTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<newValue>ID-REQUIREMENT-L</newValue>
			</linkTransformation>
			<linkTransformation>
				<objectId>ID-REQUIREMENT-L</objectId>
				<name>LINK-IS-LENGTH-REQUIREMENT</name>
				<newValue>ID-CYLINDER-SURFACE</newValue>
			</linkTransformation>
			<attributeTransformation>
				<objectId>ID-CYLINDER-SURFACE</objectId>
				<name>ATTRIBUTE-HAS-LENGTH-REQUIREMENT</name>
				<value type="boolean">true</value>
			</attributeTransformation>
		</transformations>
		<action>
			<name>OPERATION-SPLIT-CYLINDER-SURFACE</name>
			<preConditionChecker>
				<line n="1">local systemVariant = ...</line>
				<line n="2">local cylinderSurface_actual = systemVariant:getObjectByIdMatch('ID-CYLINDER-SURFACE')</line>
				<line n="3">local diameter = cylinderSurface_actual:getAttribute('ATTRIBUTE-DIAMETER'):getValueAsInteger()</line>
				<line n="4">local length = cylinderSurface_actual:getAttribute('ATTRIBUTE-LENGTH'):getValueAsInteger()</line>
				<line n="5">local requirement_l_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT-L')</line>
				<line n="6">local lengthRequired = requirement_l_actual:getAttribute('ATTRIBUTE-LENGTH-REQUIREMENT'):getValueAsInteger()</line>
				<line n="7">local requirement_r_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT-R')</line>
				<line n="8">local diameterRequired = requirement_r_actual:getAttribute('ATTRIBUTE-DIAMETER-REQUIREMENT'):getValueAsInteger()</line>
				<line n="9">return (diameter &gt; diameterRequired) and (length &gt; lengthRequired)</line>
			</preConditionChecker>
			<parameterUpdater>
				<line n="1">local systemVariant = ...</line>
				<line n="2">local cylinderSurface_actual = systemVariant:getObjectByIdMatch('ID-CYLINDER-SURFACE')</line>
				<line n="3">local diameter = cylinderSurface_actual:getAttribute('ATTRIBUTE-DIAMETER'):getValueAsInteger()</line>
				<line n="4">local length = cylinderSurface_actual:getAttribute('ATTRIBUTE-LENGTH'):getValueAsInteger()</line>
				<line n="5">local requirement_l_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT-L')</line>
				<line n="6">local lengthRequired = requirement_l_actual:getAttribute('ATTRIBUTE-LENGTH-REQUIREMENT'):getValueAsInteger()</line>
				<line n="7">local requirement_r_actual = systemVariant:getObjectByIdMatch('ID-REQUIREMENT-R')</line>
				<line n="8">local diameterRequired = requirement_r_actual:getAttribute('ATTRIBUTE-DIAMETER-REQUIREMENT'):getValueAsInteger()</line>
				<line n="9">local workpiece_actual = systemVariant:getObjectByIdMatch('ID-WORKPIECE')</line>
				<line n="10">local diameterDelta = diameter - diameterRequired</line>
				<line n="11">systemVariant:setActionParameter('PARAMETER-DIAMETER-DELTA', diameterDelta)</line>
				<line n="12">local lengthDelta = length - lengthRequired</line>
				<line n="13">systemVariant:setActionParameter('PARAMETER-LENGTH-DELTA', lengthDelta)</line>
				<line n="14">local cylinderSurface_new = systemVariant:getSystem():addNewObject('OBJECT-CYLINDER-SURFACE')</line>
				<line n="15">cylinderSurface_new:addAttribute('ATTRIBUTE-CYLINDER-SURFACE', true)</line>
				<line n="16">cylinderSurface_new:addAttribute('ATTRIBUTE-DIAMETER', diameterRequired)</line>
				<line n="17">cylinderSurface_new:addAttribute('ATTRIBUTE-LENGTH', lengthDelta)</line>
				<line n="18">cylinderSurface_new:addAttribute('ATTRIBUTE-HAS-DIAMETER-REQUIREMENT', true)</line>
				<line n="19">cylinderSurface_new:addAttribute('ATTRIBUTE-HAS-LENGTH-REQUIREMENT', false)</line>
				<line n="20">local system = systemVariant:getSystem()</line>
				<line n="21">system:addLink('LINK-IS-PART-OF', cylinderSurface_new:getId(), workpiece_actual:getId())</line>
				<line n="22">system:addLink('LINK-IS-PART-OF', workpiece_actual:getId(), cylinderSurface_new:getId())</line>
				<line n="23">system:addLink('LINK-IS-DIAMETER-REQUIREMENT', cylinderSurface_new:getId(), requirement_r_actual:getId())</line>
				<line n="24">system:getLink('LINK-IS-DIAMETER-REQUIREMENT', requirement_r_actual:getId(), nil):setObjectId2(cylinderSurface_new:getId())</line>
				<line n="25">system:addLink('LINK-IS-LENGTH-REQUIREMENT', cylinderSurface_new:getId(), nil)</line>
				<line n="26">system:addLink('LINK-SURFACE-SIDE-LEFT', cylinderSurface_new:getId(), cylinderSurface_actual:getId())</line>
				<line n="27">system:addLink('LINK-SURFACE-SIDE-LEFT', cylinderSurface_actual:getId(), cylinderSurface_new:getId())</line>
				<line n="28">system:addLink('LINK-SURFACE-SIDE-RIGHT', cylinderSurface_new:getId(), nil)</line>
				<line n="29">cylinderSurface_actual:getAttribute('ATTRIBUTE-LENGTH'):setValue(lengthRequired)</line>
			</parameterUpdater>
		</action>
	</systemTransformation>
</systemTransformations>
